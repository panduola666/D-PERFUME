import{p as $,H as I,F as q,S as k}from"./products-7226cf43.js";import{_ as C,r as h,u as F,o as T,j,a as V,b as c,c as l,d,e as s,F as u,f as y,w as g,t as r,g as i,h as x,n as w,p as B,i as J}from"./index-d9f49817.js";const p=_=>(B("data-v-9c121c98"),_=_(),J(),_),O=p(()=>s("nav",{class:"bg-primary text-white"},[s("h1",{class:"container fs-2 py-2"},"我的收藏")],-1)),W={key:0,class:"container"},E={class:"row list-unstyled mt-7 mb-2 mt-md-10 mb-md-4"},H={class:"card border-0"},z={class:"overflow-hidden"},A=["src","alt"],D={class:"card-body p-0"},L={class:"card-title h5 fw-semibold mb-0"},M={class:"card-text"},P={class:"mb-0"},R={key:0,class:"text-secondary"},G={class:"text-primary"},K=["onClick"],Q=p(()=>s("span",{class:"material-symbols-outlined fill pointer"},"shopping_cart",-1)),U={"aria-label":"Page navigation example"},X={class:"pagination justify-content-center fs-5 mb-7 mb-md-9"},Y={key:1,class:"container my-10"},Z={class:"text-center py-10 mb-5 bg-primary-subtle"},ee=p(()=>s("h2",{class:"mb-7 h1 fw-semibold"},"當前沒有收藏",-1)),se=p(()=>s("h3",null,"推薦商品",-1)),te={class:"list-unstyled row"},ae={class:"card"},oe=["src","alt"],ce={class:"card-body p-2"},le={class:"card-title mb-0"},re={class:"mb-2"},ie={key:0,class:"text-secondary"},ne={__name:"Wishlist",setup(_){const v=h([]),b=h([]),a=h(JSON.parse(localStorage.getItem("favorite"))||[]),m=F();T(async()=>{f()}),j(()=>m.query.category,async()=>f());async function f(){const t=await $();a.value.forEach(o=>{!b.value.includes(o.category)&&b.value.push(o.category)}),m.query.category==="all"?v.value=t.products:a.value=t.products.filter(o=>o.category===m.query.category)}function S(t){a.value=JSON.parse(localStorage.getItem("favorite"))||[];const o=a.value.findIndex(n=>n.id===t.id);o!==-1?(a.value.splice(o,1),k("已移出我的收藏")):(a.value.push(t),k("已加入我的收藏")),localStorage.setItem("favorite",JSON.stringify(a.value))}function N(t){return a.value.some(o=>o.id===t)}return(t,o)=>{const n=V("router-link");return c(),l(u,null,[d(I),O,a.value.length?(c(),l("main",W,[s("ul",E,[(c(!0),l(u,null,y(a.value,e=>(c(),l("li",{class:"col-6 col-md-4 mb-sm mb-md-9",key:e.id},[s("div",H,[s("div",z,[s("img",{src:e.image,class:"card-img-top rounded-0 object-fit-cover productImg pointer",alt:e.title},null,8,A)]),s("div",D,[s("h2",L,r(e.title),1),s("div",M,[i(r(e.category)+" ",1),s("p",P,[i(" NT$"+r(e.price)+" ",1),e.price!==e.origin_price?(c(),l("del",R,"NT$"+r(e.origin_price),1)):x("",!0)])]),s("div",G,[s("span",{class:w(["material-symbols-outlined pointer me-2",{fill:N(e.id)}]),onClick:de=>S(e)},"favorite",10,K),Q])])])]))),128))]),s("nav",U,[s("ul",X,[(c(),l(u,null,y(1,e=>s("li",{class:"page-item",key:e},[d(n,{to:{path:t.$route.path,query:{page:e,category:t.$route.query.category}},class:w(`page-link border-0 rounded-0  text-${+t.$route.query.page===e?"primary":"black"} border-bottom${+t.$route.query.page===e?"":"-0"} border-primary `)},{default:g(()=>[i(r(e),1)]),_:2},1032,["to","class"])])),64))])])])):(c(),l("main",Y,[s("div",Z,[ee,d(n,{to:"/product?page=1&category=all",class:"btn btn-primary btn-lg px-8"},{default:g(()=>[i("快來選購")]),_:1})]),se,s("ul",te,[(c(!0),l(u,null,y(v.value.slice(0,4),e=>(c(),l("li",{class:"col-12 col-md-3 mb-3",key:e.id},[s("div",ae,[s("img",{src:e.image,class:"card-img-top object-fit-cover",alt:e.title,height:"300"},null,8,oe),s("div",ce,[s("h5",le,[i(r(e.title),1),s("small",null,"["+r(e.category)+"]",1)]),s("p",re,[i(" NT$"+r(e.price)+" ",1),e.price!==e.origin_price?(c(),l("del",ie,"NT$"+r(e.origin_price),1)):x("",!0)]),d(n,{to:"",class:"btn btn-primary"},{default:g(()=>[i("查看商品")]),_:1})])])]))),128))])])),d(q)],64)}}},pe=C(ne,[["__scopeId","data-v-9c121c98"]]);export{pe as default};
